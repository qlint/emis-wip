<form name="userForm" class="form-horizontal modalForm" method="post" novalidate ng-submit="save(userForm)">
	<div class="modal-header dialog-header-form">
		<button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		<h4 class="modal-title"><span class="glyphicon glyphicon-plus"></span> {{ (edit ? 'Update' : 'Add') }} User</h4>
	</div>
	<div class="modal-body cleafix">
		<div ng-show="error" class="alert alert-danger">{{errMsg}}</div>
		<div class="row">
			<div class="col-sm-3">
				<!-- first name -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.first_name.$dirty ) && userForm.first_name.$invalid && userForm.first_name.$error.required }">
					<label for="first_name" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>First Name</label>
					<div class="col-sm-9">
						<input type="text" name="first_name" ng-model="user.first_name" ng-change="checkSave(user)" class="form-control" required >
						<p ng-show="(userForm.$submitted || userForm.first_name.$dirty ) && userForm.first_name.$invalid && userForm.first_name.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> First Name is required.</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- middle name -->
				<div class="form-group">
					<label for="middle_name" class="col-sm-3 control-label">Middle Name(s)</label>
					<div class="col-sm-9">
						<input type="text" name="middle_name" ng-model="user.middle_name" class="form-control"  >
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- last name -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.last_name.$dirty ) && userForm.last_name.$invalid && userForm.last_name.$error.required }">
					<label for="last_name" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Last Name</label>
					<div class="col-sm-9">
						<input type="text" name="last_name" ng-model="user.last_name" ng-change="checkSave(user)" class="form-control" required >
						<p ng-show="(userForm.$submitted || userForm.last_name.$dirty ) && userForm.last_name.$invalid && userForm.last_name.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Last Name is required.</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- user type -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.user_type.$dirty ) && userForm.user_type.$invalid && userForm.user_type.$error.required }">
					<label for="user_type" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>User Type</label>
					<div class="col-sm-9">
						<select name="user_type" class="form-control" ng-options="type for type in userTypes" ng-model="user.user_type" ng-change="checkSave(user)" required>
							<option value="">--select user type--</option>
						</select>
						<p ng-show="(userForm.$submitted || userForm.user_type.$dirty ) && userForm.user_type.$invalid && userForm.user_type.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> User Type is required.</p>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-3">
				<!-- phone -->
				<div class="form-group"  ng-class="{ 'has-error' : (userForm.$submitted || userForm.phone.$dirty ) && userForm.phone.$invalid && (userForm.phone.$error.required || userForm.phone.$error.phone) }">
					<label for="email" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Phone</label>
					<div class="col-sm-9">
						<input type="tel" pattern="[0-9]{10,14}" name="phone" id="phone" class="form-control input-sm" ng-model="user.phone" ng-change="checkSave(user)" required>
						<p ng-show="(userForm.$submitted || userForm.phone.$dirty ) && userForm.phone.$invalid && userForm.phone.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Phone is required.</p>
						<p ng-show="(userForm.$submitted || userForm.phone.$dirty ) && userForm.phone.$invalid && userForm.phone.$error.phone" class="help-block"><i class="fa fa-exclamation-triangle"></i> Invalid phone</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- email -->
				<div class="form-group"  ng-class="{ 'has-error' : (userForm.$submitted || userForm.email.$dirty ) && userForm.email.$invalid && (userForm.email.$error.required || userForm.email.$error.email) }">
					<label for="email" class="col-sm-3 control-label">Email</label>
					<div class="col-sm-9">
						<input type="email" name="email" id="email" class="form-control input-sm" ng-model="user.email" required>
						<p ng-show="(userForm.$submitted || userForm.email.$dirty ) && userForm.email.$invalid && userForm.email.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Email is required.</p>
						<p ng-show="(userForm.$submitted || userForm.email.$dirty ) && userForm.email.$invalid && userForm.email.$error.email" class="help-block"><i class="fa fa-exclamation-triangle"></i> Invalid email</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- username -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.username.$dirty ) && userForm.username.$invalid && userForm.username.$error.required }">
					<label for="username" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Username</label>
					<div class="col-sm-9">
						<input type="text" name="username" ng-model="user.username" ng-change="checkSave(user)" class="form-control" required >
						<p ng-show="(userForm.$submitted || userForm.username.$dirty ) && userForm.username.$invalid && userForm.username.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Username is required.</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- password -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.password.$dirty ) && userForm.password.$invalid && userForm.password.$error.required }">
					<label for="password" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Password</label>
					<div class="col-sm-9">
						<input type="text" name="password" ng-model="user.password" ng-change="checkSave(user)" class="form-control" required >
						<p ng-show="(userForm.$submitted || userForm.password.$dirty ) && userForm.password.$invalid && userForm.password.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Password is required.</p>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-3">
				<!-- phone 2 -->
				<div class="form-group"  ng-class="{ 'has-error' : (userForm.$submitted || userForm.phone2.$dirty ) && userForm.phone2.$invalid }">
					<label for="phone2" class="col-sm-3 control-label">Phone 2</label>
					<div class="col-sm-9">
						<input type="tel" pattern="[0-9]{10,14}" name="phone2" id="phone2" class="form-control input-sm" ng-model="user.phone2">
						<p ng-show="(userForm.$submitted || userForm.phone2.$dirty ) && userForm.phone2.$invalid && userForm.phone2.$error.phone2" class="help-block"><i class="fa fa-exclamation-triangle"></i> Invalid phone 2</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- id number -->
				<div class="form-group"  ng-class="{ 'has-error' : (userForm.$submitted || userForm.id_number.$dirty ) && userForm.id_number.$invalid && (userForm.id_number.$error.required || userForm.id_number.$error.id_number) }">
					<label for="id_number" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>ID Num.</label>
					<div class="col-sm-9">
						<input type="text" name="id_number" id="id_number" class="form-control input-sm" ng-model="user.id_number" ng-change="checkSave(user)" required>
						<p ng-show="(userForm.$submitted || userForm.id_number.$dirty ) && userForm.id_number.$invalid && userForm.id_number.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> ID is required.</p>
						<p ng-show="(userForm.$submitted || userForm.id_number.$dirty ) && userForm.id_number.$invalid && userForm.id_number.$error.id_number" class="help-block"><i class="fa fa-exclamation-triangle"></i> Invalid ID</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- gender -->
				<div class="form-group">
					<label for="gender" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Gender</label>
					<div class="col-sm-9">
						<select name="gender" class="form-control" ng-model="user.gender" ng-change="checkSave(user)">
							<option value="M">Male</option>
							<option value="F">Female</option>
						</select>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- DOB -->
				<div class="form-group"  ng-class="{ 'has-error' : (userForm.$submitted || userForm.dob.$dirty ) && userForm.dob.$invalid && (userForm.dob.$error.dob) }">
					<label for="dob" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Birth Date</label>
					<div class="col-sm-9">
						<input type="text" name="dob" id="dob" class="form-control input-sm" ng-model="user.dob" ng-change="checkSave(user)" placeholder="dd/mm/1800">
						<p ng-show="(userForm.$submitted || userForm.dob.$dirty ) && userForm.dob.$invalid && userForm.dob.$error.dob" class="help-block"><i class="fa fa-exclamation-triangle"></i> Invalid birth date</p>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-3">
				<!-- category -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.emp_cat_id.$dirty ) && userForm.emp_cat_id.$invalid && userForm.emp_cat_id.$error.required }">
					<label for="user_type" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Category</label>
					<div class="col-sm-9">
						<select name="emp_cat_id" class="form-control" ng-options="cat.emp_cat_id as cat.emp_cat_name for cat in empCats" ng-model="user.emp_cat_id" ng-change="checkSave(user); getDepts(user.emp_cat_id);" required>
							<option value="">--category--</option>
						</select>
						<p ng-show="(userForm.$submitted || userForm.emp_cat_id.$dirty ) && userForm.emp_cat_id.$invalid && userForm.emp_cat_id.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Category is required.</p>
					</div>
				</div>
			</div>
			<div class="col-sm-3">
				<!-- department -->
				<div class="form-group" ng-class="{ 'has-error' : (userForm.$submitted || userForm.dept_id.$dirty ) && userForm.dept_id.$invalid && userForm.dept_id.$error.required }">
					<label for="dept_id" class="col-sm-3 control-label"><b style="color:red;font-size:11px;">*</b>Dept.</label>
					<div class="col-sm-9">
						<select name="dept_id" class="form-control" ng-options="dept.dept_id as dept.dept_name for dept in empDepts" ng-model="user.dept_id" ng-change="checkSave(user)" required>
							<option value="">--department--</option>
						</select>
						<p ng-show="(userForm.$submitted || userForm.dept_id.$dirty ) && userForm.dept_id.$invalid && userForm.dept_id.$error.required" class="help-block"><i class="fa fa-exclamation-triangle"></i> Department is required.</p>
					</div>
				</div>
			</div>
		</div>

	</div>
	<div class="modal-footer">
		<div class="pull-left">
			<button type="button" class="btn btn-sm btn-danger" ng-click="deleteUser()" ng-show="edit && user.active">Remove User</button>
			<button type="button" class="btn btn-sm btn-success" ng-click="activateUser()" ng-show="edit && !user.active">Re-activate User</button>
		</div>
		<button type="button" class="btn btn-link" ng-click="cancel()">Cancel</button>
		<button type="submit" class="btn btn-primary {{!edit && !enableSave ? 'disabled' : ''}}">{{ (edit ? 'Update' : 'Save') }}</button>
	</div>
</form>
