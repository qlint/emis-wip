<style type="text/css">
	.modal {display: none;position: fixed;z-index: 1;padding-top: 100px;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.4);}
	.cloze1,.cloze2 {color: #ffffff;float: right;font-size: 28px;font-weight: bold;opacity:1;}
	.cloze1:hover,.cloze1:focus,.cloze2:hover,.cloze2:focus {color: #000;text-decoration: none;cursor: pointer;}
	.modal-header {padding: 0px 16px;background-color: #397C49;color: white;}
	.modal-content .modal-header {padding: 0px 15px;}
	.modal-body {padding: 0px 16px;}
	.modal-footer {padding: 0px 16px;background-color: #4CAF50;color: white;text-align:center;border-top:none;}
	.modal-content {position: relative;background-color: #ffffff;margin: auto;padding: 0;border: 1px solid #888;width: 50%;box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);animation-name: animatetop;animation-duration: 0.4s;width:100% !important;}
	@keyframes animatetop {
	  from {top: -300px; opacity: 0}
	  to {top: 0; opacity: 1}
	}
</style>
<div ng-controller="listReportCardsCtrl">

	<div id="body-content" class="row fixed-filter hasSubNav" ng-class="{'modal-body': isPrinting, 'smallScreen' : isSmallScreen}">

		<div class="notification alert alert-success" ng-show="updated" ng-class="{'fade-out': alert.expired}">
			<strong>Success!</strong> {{notificationMsg}}
		</div>
		<div class="notification alert alert-danger alert-dismissible" ng-show="error">
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			{{errMsg}}
		</div>

		<div class="fixed content-fixed-header">
			<div class="subnavbar non-printable" ng-hide="isPrinting">
				<ul class="nav nav-tabs main-sub-nav" >
					<li ng-class="{active: item.subSection == activeSubSection}" ng-repeat="item in mainSubNavItems"><a ui-sref="{{item.id}}">{{item.label}}</a></li>
				</ul>
			</div>
			<h4 class="pageToolsToggler" ng-show="isSmallScreen" data-toggle="collapse" data-target="#pageTools" aria-expanded="false" aria-controls="pageTools" ng-click="toggleTools()">Tools <span class="caret"></span></h4>
			<div class="pull-right toolbar-container clearfix non-printable" ng-class="{'collapse': isSmallScreen}" ng-hide="isPrinting" id="pageTools">
				<div class="btn-group toolbar">
					<div id="batchPreResultSlips" class="btn add-btn" title="Print Batch Result Slips" ng-show="permissions.exams.report_cards.add" ng-click="preResultSlips()"><a class="clickable"><span class="glyphicon glyphicon-plus-sign"></span> <span class="tool-text">Print Batch Result Slips</span></a></div>
					<div id="batchPreModal" class="btn add-btn" title="Print Batch Report Cards" ng-show="permissions.exams.report_cards.add" ng-click="preBulkPrint()"><a class="clickable"><span class="glyphicon glyphicon-plus-sign"></span> <span class="tool-text">Print Batch Report Cards</span></a></div>
					<div class="btn add-btn" title="Add Report Card" ng-show="permissions.exams.report_cards.add" ng-click="addReportCard()"><a class="clickable"><span class="glyphicon glyphicon-plus-sign"></span> <span class="tool-text">Add Report Card</span></a></div>
				</div>
			</div>

			<div class="clearfix">
				<h1 id="pageTitle">Report Cards</h1>
			</div>

			<!-- search form -->
			<div class="dataFilterForm">
				<h4 ng-show="!isSmallScreen">Filters</h4>
				<h4 ng-show="isSmallScreen" data-toggle="collapse" data-target="#filterForm" aria-expanded="false" aria-controls="filterForm" ng-click="toggleFilter()">Filters <span class="caret"></span></h4>
				<form name="dataFilterForm" class="form-inline non-printable" method="post" novalidate ng-hide="isPrinting" ng-class="{'collapse': isSmallScreen}" id="filterForm">
					<!-- class select -->
					<div class="form-group">
						<label for="class">Class</label>
						<select name="class" id="class" class="form-control" ng-options="class.class_name for class in classes track by class.class_id" ng-model="filters.class">
							<option value="">--select class--</option>
						</select>
					</div>
					<!-- year select -->
					<div class="form-group">
						<label for="year">Year</label>
						<select class="form-control" ng-model="filters.year" >
							<option ng-repeat="item in years track by $index" value="{{item.year}}">{{item.year}}</option>
						</select>
					</div>

					<!-- search btn -->
					<div class="form-group submit-btn">
						<input type="submit" class="btn btn-sm btn-info" ng-click="getStudentReportCards()" value="Load" />
						<img src="assets/spinner.gif" ng-show="loading" />
						<button type="button" class="btn btn-link" ng-show="isSmallScreen" data-toggle="collapse" data-target="#filterForm" aria-expanded="false" aria-controls="filterForm" ng-click="toggleFilter()">cancel</button>
					</div>

				</form>
			</div>
			<!-- // end search form -->


		</div>

		<!-- Batch Printing Modal Parameters -->
		<div id="batchPrntParams" class="modal" style="margin-top:0px;z-index:1001;">
		  <!-- Modal content -->
			<div class="modal-content">
			  <div class="modal-header">
			    <span class="cloze1" style="margin-top:10px;">&times;</span>
			    <h2>Batch Report Cards</h2>
			  </div>
			  <div class="modal-body">
			    <p>Please select the class and term</p>
					<div class="modalDataFilter clearfix">
						<!-- category select -->
						<!--
						<div class="form-group">
							<label for="category">Category</label>
							<select class="form-control" ng-options="item.class_cat_id as item.class_cat_name for item in classCats" ng-model="filters.class_cat_id" ignore-dirty>
							</select>
						</div>
						-->
						<!-- class select -->
						<div class="form-group">
							<label for="class">Class</label>
							<select class="form-control" ng-options="class.class_name for class in classes track by class.class_id" ng-model="filters.class" ignore-dirty>
							</select>
						</div>

						<!-- term select -->
						<div class="form-group">
							<label for="term">Term</label>
							<select class="form-control" ng-options="term.term_name for term in terms track by term.term_id" ng-model="filters.term" ignore-dirty>
							</select>
						</div>

						<!-- search btn -->
						<div class="form-group submit-btn">
							<input type="button" class="btn btn-sm btn-info" ng-click="batchClassReportCards()" value="{{batchRptCardsBtnTxt}}" />
							<span ng-show="loading" class="fa fa-spinner fa-pulse"></span>
						</div>
					</div>
					<h4 ng-show="preBulkLoadMsg" id="preBulkLoad" style="text-align:center;">{{preBulkLoad}}</h4>

			  </div>
			  <div class="modal-footer">
			    <h4>Class report cards will be printed as one long print out.</h4>
			  </div>
			</div>
		</div>

		<!-- Batch Printing Modal Parameters (result slips) -->
		<div id="batchPrntSlipParams" class="modal" style="margin-top:0px;z-index:1001;">
		  <!-- Modal content -->
			<div class="modal-content">
			  <div class="modal-header">
			    <span class="cloze2" style="margin-top:10px;">&times;</span>
			    <h2>Batch Result Slips</h2>
			  </div>
			  <div class="modal-body">
			    <p>Please select the class, term and exam</p>
					<div class="modalDataFilter clearfix">
						<!-- category select -->
						<!--
						<div class="form-group">
							<label for="category">Category</label>
							<select class="form-control" ng-options="item.class_cat_id as item.class_cat_name for item in classCats" ng-model="filters.class_cat_id" ignore-dirty>
							</select>
						</div>
						-->
						<!-- class select -->
						<div class="form-group">
							<label for="class">Class</label>
							<select class="form-control" ng-options="class.class_name for class in classes track by class.class_id" ng-model="filters.class" ng-change="getClassExams()" ignore-dirty>
							</select>
						</div>

						<!-- term select -->
						<div class="form-group">
							<label for="term">Term</label>
							<select class="form-control" ng-options="term.term_name for term in terms track by term.term_id" ng-model="filters.term" ignore-dirty>
							</select>
						</div>

						<!-- exam select -->
						<div class="form-group">
							<label for="term">Exam</label>
							<select class="form-control" ng-options="exam.exam_type for exam in examTypes track by exam.exam_type_id" ng-model="filters.exam" ignore-dirty style="min-width:100px !important;">
							</select>
						</div>

						<!-- search btn -->
						<div class="form-group submit-btn">
							<input type="button" class="btn btn-sm btn-info" ng-click="bulkSlips()" value="Load Result Slips" />
							<span ng-show="loading" class="fa fa-spinner fa-pulse"></span>
						</div>
						<h3 id="preResultSlipLoad" style="text-align:center;display:none;">Loading: {{preResultSlipLoad}}</h3>
					</div>

			  </div>
			  <div class="modal-footer">
			    <h4>Class result slips will be printed as one long print out.</h4>
			  </div>
			</div>
		</div>

		<div class="full-height datagrid main-datagrid">
			<div class="loading-indicator" ng-show="loading"><i class="fa fa-spinner fa-spin text-lg"></i></div>
			<p ng-show="reportsNotFound" class="error alert alert-danger">
				{{errMsg}}
			</p>

			<div ng-include="getReport"></div>

			<script type="text/ng-template" id="reportTable">
				<table id="resultsTable" class="display dataTable clickable" cellspacing="0" width="100%" ng-show="!loading">
					<thead>
						<tr>
							<th></th>
							<th>Student</th>
							<th class="center" ng-repeat="item in termNums">{{item}}</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in reportCards.students track by $index">
							<td></td>
							<td width="75">{{item.student_name}}</td>
							<td class="center" ng-repeat="term in termNums track by $index">
								<span ng-show="item.reports[term]" ng-click="getReportCard(item, term, item.reports[term])" class="glyphicon glyphicon-file icon-lg"></span>
								<span ng-show="!item.reports[term]" >-</span>
							</td>
						</tr>
					</tbody>
				</table>
			</script>


		</div>

	</div>
</div>
